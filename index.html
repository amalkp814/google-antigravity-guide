<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Antigravity: The Safe Coding Handbook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Palette: Cyber Blue / Developer Dark Mode */
        body {
            background-color: #0f172a;
            color: #f8fafc;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        /* Timeline styling */
        .timeline-line {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background-color: #334155;
            z-index: 0;
        }
        
        .timeline-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #22d3ee;
            border: 4px solid #0f172a;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }

        @media (max-width: 768px) {
            .timeline-line {
                left: 20px;
            }
            .timeline-dot {
                left: 20px;
            }
        }
        
        /* Custom scrollbar for output areas */
        .custom-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #1e293b; 
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #475569; 
            border-radius: 4px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #64748b; 
        }
    </style>
    <!-- 
      Source Analysis: Guide for Google Antigravity IDE (Safety, Consistency, Accuracy).
      Visualizations: Bar Chart, Radar Chart, Donut Chart, Timeline.
      AI Features: Risk Analyzer, Agent Planner.
      Constraint Check: NO SVG used. NO Mermaid used. All Chart.js.
    -->
</head>
<body class="antialiased selection:bg-cyan-500 selection:text-white pb-20">

    <!-- Hero Section -->
    <header class="bg-gradient-to-r from-slate-900 to-slate-800 border-b border-slate-700 py-16 px-6">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-5xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-violet-400 mb-6 tracking-tight">
                GOOGLE ANTIGRAVITY
            </h1>
            <p class="text-xl md:text-2xl text-slate-300 max-w-3xl mx-auto leading-relaxed">
                The Safe Coding Handbook for the Agent-First Era. <br>
                Master autonomy, enforce consistency, and ensure accuracy in your IDE.
            </p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-12 space-y-24">

        <!-- Section 1: Introduction & The Core Risk -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div class="order-2 md:order-1">
                <div class="bg-slate-800 rounded-2xl p-8 shadow-xl border border-slate-700 hover:border-cyan-500/50 transition-colors">
                    <h2 class="text-3xl font-bold text-cyan-400 mb-4">The Agent-First Paradigm</h2>
                    <p class="text-slate-300 mb-6 leading-relaxed">
                        Antigravity represents a shift from writing code to <strong>managing agents</strong>. While powerful, autonomous agents introduce risks: accidental file deletion, hallucinated dependencies, and "lazy" coding. 
                    </p>
                    <p class="text-slate-300 leading-relaxed border-l-4 border-violet-500 pl-4">
                        To succeed, developers must transition from "Coders" to "Architects," strictly controlling the agent's environment and permissions to prevent destructive actions.
                    </p>
                </div>
            </div>
            <div class="order-1 md:order-2 flex flex-col justify-center text-center">
                <div class="text-9xl font-black text-slate-800 relative z-0 select-none opacity-50">
                    IDE
                </div>
                <div class="relative z-10 -mt-16">
                    <span class="text-6xl font-bold text-white drop-shadow-[0_0_15px_rgba(34,211,238,0.5)]">Safety First</span>
                    <p class="mt-4 text-violet-300 text-lg uppercase tracking-widest font-semibold">Control the Autonomy</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Safety Protocols (Chart) -->
        <section>
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-white mb-4">1. Safety: Terminal Permissions</h2>
                <p class="text-slate-400 max-w-2xl mx-auto">
                    The biggest risk in agentic IDEs is the execution of destructive commands. Configuring your terminal permissions is the first line of defense against accidents like <code class="bg-slate-700 px-2 py-1 rounded text-red-400">rm -rf</code>.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700">
                    <div class="chart-container">
                        <canvas id="safetyChart"></canvas>
                    </div>
                </div>
                <div class="space-y-6">
                    <div class="bg-slate-800/50 p-6 rounded-lg border-l-4 border-red-500">
                        <h3 class="text-xl font-bold text-red-400 mb-2">Turbo Mode (High Risk)</h3>
                        <p class="text-sm text-slate-300">Allows the agent to execute commands without approval. Highly dangerous for complex tasks where the agent might hallucinate destructive flags.</p>
                    </div>
                    <div class="bg-slate-800/50 p-6 rounded-lg border-l-4 border-yellow-400">
                        <h3 class="text-xl font-bold text-yellow-400 mb-2">Auto Mode (Recommended)</h3>
                        <p class="text-sm text-slate-300">The agent acts autonomously but pauses to ask for permission before running sensitive commands (network requests, file deletions).</p>
                    </div>
                    <div class="bg-slate-800/50 p-6 rounded-lg border-l-4 border-emerald-500">
                        <h3 class="text-xl font-bold text-emerald-400 mb-2">Off / Manual (Safest)</h3>
                        <p class="text-sm text-slate-300">Every single terminal command requires your explicit click to approve. Best for critical production environments.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Consistency (Radar Chart) -->
        <section class="bg-slate-800 rounded-3xl p-8 md:p-12 shadow-2xl border border-slate-700">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div>
                    <h2 class="text-4xl font-bold text-white mb-6">2. Consistency: Planning Mode</h2>
                    <p class="text-slate-300 mb-6 leading-relaxed">
                        Antigravity defaults to "Fast Mode," which optimizes for speed but often leads to spaghetti code. To ensure consistency, you must toggle to <strong>"Planning Mode"</strong>. This forces the agent to generate a task list and implementation strategy before writing a single line of code.
                    </p>
                    <ul class="space-y-4 mb-8">
                        <li class="flex items-start">
                            <span class="text-cyan-400 mr-3 text-xl">&#10004;</span>
                            <span class="text-slate-300">Forces generation of a Task List Artifact.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-cyan-400 mr-3 text-xl">&#10004;</span>
                            <span class="text-slate-300">Reads your <code>.cursorrules</code> or System Prompt first.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-cyan-400 mr-3 text-xl">&#10004;</span>
                            <span class="text-slate-300">Prevents context-switching hallucinations.</span>
                        </li>
                    </ul>
                </div>
                <div class="flex flex-col items-center justify-center">
                    <h3 class="text-xl font-semibold text-slate-400 mb-4">Fast Mode vs. Planning Mode</h3>
                    <div class="chart-container">
                        <canvas id="consistencyRadar"></canvas>
                    </div>
                    <p class="text-xs text-center text-slate-500 mt-4">Planning Mode sacrifices raw speed for massive gains in accuracy and safety.</p>
                </div>
            </div>
        </section>

        <!-- Section 4: Accuracy (Donut Chart) -->
        <section>
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-white mb-4">3. Accuracy: The Verification Loop</h2>
                <p class="text-slate-400 max-w-2xl mx-auto">
                    Do not trust the agent blindly. Antigravity introduces "Artifacts"‚Äîtangible outputs like plans and browser recordings. Your role shifts to verifying these artifacts before finalizing code.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div class="order-2 md:order-1">
                    <div class="chart-container">
                        <canvas id="accuracyDonut"></canvas>
                    </div>
                </div>
                <div class="order-1 md:order-2 space-y-8">
                    <div class="relative pl-8 border-l-2 border-violet-500">
                        <h3 class="text-2xl font-bold text-violet-400 mb-2">Review Implementation Plans</h3>
                        <p class="text-slate-300">When the agent produces a plan, read it. If it suggests an outdated library, edit the artifact directly. Treat the plan as a contract.</p>
                    </div>
                    <div class="relative pl-8 border-l-2 border-pink-500">
                        <h3 class="text-2xl font-bold text-pink-400 mb-2">Visual Verification</h3>
                        <p class="text-slate-300">Ask the agent to "Take a screenshot of the login page." Reviewing a visual proof is far more accurate than parsing text logs for errors.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: The "Follow a Plan" Workflow -->
        <section class="relative">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-white mb-4">4. Strategic Workflow</h2>
                <p class="text-slate-400">How to code safely by constraining the agent to a rigid trajectory.</p>
            </div>

            <div class="relative max-w-4xl mx-auto">
                <div class="timeline-line hidden md:block"></div>

                <!-- Step 1 -->
                <div class="relative md:grid md:grid-cols-2 gap-12 mb-12 items-center">
                    <div class="md:text-right pr-6 mb-4 md:mb-0">
                        <h3 class="text-2xl font-bold text-cyan-400">Draft Master Prompt</h3>
                        <p class="text-slate-400 mt-2">Start with a high-level architectural prompt defining the goal.</p>
                    </div>
                    <div class="hidden md:block timeline-dot"></div>
                    <div class="pl-6 md:pl-0">
                        <div class="bg-slate-800 p-4 rounded-lg border border-slate-700 text-sm font-mono text-slate-300">
                            "Build a Python Flask app for honey inventory using SQLite..."
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="relative md:grid md:grid-cols-2 gap-12 mb-12 items-center">
                    <div class="md:text-right pr-6 mb-4 md:mb-0 md:order-1">
                         <div class="bg-slate-800 p-4 rounded-lg border border-slate-700 text-sm font-mono text-slate-300">
                            1. Setup venv<br>2. Create schema.sql<br>3. <span class="text-red-400 line-through">Install React</span> (Deleted)
                        </div>
                    </div>
                    <div class="hidden md:block timeline-dot md:order-2"></div>
                    <div class="pl-6 md:pl-0 md:order-3">
                         <h3 class="text-2xl font-bold text-violet-400">Freeze Scope</h3>
                        <p class="text-slate-400 mt-2">The agent generates a Task List. Review it. Delete unnecessary steps (features creep) before approval.</p>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="relative md:grid md:grid-cols-2 gap-12 items-center">
                    <div class="md:text-right pr-6 mb-4 md:mb-0">
                        <h3 class="text-2xl font-bold text-pink-400">Execute Step-by-Step</h3>
                        <p class="text-slate-400 mt-2">Do not run all. Approve one task. Verify the output. Then proceed.</p>
                    </div>
                    <div class="hidden md:block timeline-dot"></div>
                    <div class="pl-6 md:pl-0">
                        <div class="bg-slate-800 p-4 rounded-lg border border-slate-700 text-sm font-mono text-slate-300">
                            <span class="text-emerald-400">&#10004;</span> Task 1 Complete.<br>
                            <span class="text-emerald-400">&#10004;</span> Tests Passed.<br>
                            <span class="text-yellow-400">...</span> Awaiting approval for Task 2.
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- New Section: Gemini AI Tools -->
        <section class="mt-24 pt-12 border-t border-slate-700">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-white mb-4">5. Interactive AI Tools</h2>
                <p class="text-slate-400">Powered by Google Gemini 2.5 Flash</p>
                <div class="max-w-md mx-auto mt-6">
                    <label class="block text-sm text-slate-400 mb-2 text-left">Gemini API Key (Required for AI features)</label>
                    <input type="password" id="userApiKey" placeholder="Paste your API Key here..." 
                        class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-white placeholder-slate-600 focus:outline-none focus:border-cyan-500 transition-colors">
                    <p class="text-xs text-slate-500 mt-2 text-left">Get a free key at <a href="https://aistudio.google.com" target="_blank" class="text-cyan-400 hover:underline">aistudio.google.com</a></p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Tool 1: Risk Analyzer -->
                <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-xl flex flex-col">
                    <h3 class="text-2xl font-bold text-cyan-400 mb-4">üõ°Ô∏è Risk Analyzer</h3>
                    <p class="text-slate-400 mb-6 text-sm">Enter a command or task. Gemini will recommend the safest Terminal Permission (Turbo, Auto, or Off).</p>
                    
                    <div class="space-y-4 flex-grow">
                        <input type="text" id="riskInput" placeholder="e.g., Delete all .tmp files recursively..." 
                            class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500 transition-colors">
                        
                        <button onclick="analyzeRisk()" id="riskBtn"
                            class="w-full bg-gradient-to-r from-cyan-600 to-cyan-500 hover:from-cyan-500 hover:to-cyan-400 text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg shadow-cyan-500/20">
                            <span>Analyze Risk</span>
                            <span>‚ú®</span>
                        </button>

                        <div id="riskOutput" class="hidden bg-slate-900 p-4 rounded-lg border border-slate-700 text-slate-300 text-sm leading-relaxed mt-4 custom-scroll max-h-40 overflow-y-auto"></div>
                    </div>
                </div>

                <!-- Tool 2: Agent Planner -->
                <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 shadow-xl flex flex-col">
                    <h3 class="text-2xl font-bold text-violet-400 mb-4">üìù Agent Planner</h3>
                    <p class="text-slate-400 mb-6 text-sm">Describe a project. Gemini will generate a "Planning Mode" Task List Artifact to get you started safely.</p>
                    
                    <div class="space-y-4 flex-grow">
                        <input type="text" id="planInput" placeholder="e.g., A React dashboard for crypto tracking..." 
                            class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-white placeholder-slate-500 focus:outline-none focus:border-violet-500 transition-colors">
                        
                        <button onclick="generatePlan()" id="planBtn"
                            class="w-full bg-gradient-to-r from-violet-600 to-violet-500 hover:from-violet-500 hover:to-violet-400 text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 shadow-lg shadow-violet-500/20">
                            <span>Generate Plan</span>
                            <span>‚ú®</span>
                        </button>

                        <div id="planOutput" class="hidden bg-slate-900 p-4 rounded-lg border border-slate-700 text-slate-300 text-sm font-mono whitespace-pre-wrap mt-4 custom-scroll max-h-60 overflow-y-auto"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer / Checklist -->
        <footer class="mt-24 pt-12 border-t border-slate-800">
            <h2 class="text-3xl font-bold text-center text-white mb-8">Summary Checklist</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
                <div class="bg-slate-800 p-6 rounded-lg text-center border-b-4 border-cyan-500">
                    <div class="text-4xl mb-4">üõ°Ô∏è</div>
                    <h3 class="text-lg font-bold text-white mb-2">Safety</h3>
                    <p class="text-slate-400 text-sm">Set Terminal to <strong>Auto</strong>. Always sandbox in a virtual env.</p>
                </div>
                <div class="bg-slate-800 p-6 rounded-lg text-center border-b-4 border-violet-500">
                    <div class="text-4xl mb-4">üìù</div>
                    <h3 class="text-lg font-bold text-white mb-2">Consistency</h3>
                    <p class="text-slate-400 text-sm">Use <strong>Planning Mode</strong>. Define rules in System Prompts.</p>
                </div>
                <div class="bg-slate-800 p-6 rounded-lg text-center border-b-4 border-pink-500">
                    <div class="text-4xl mb-4">üëÅÔ∏è</div>
                    <h3 class="text-lg font-bold text-white mb-2">Accuracy</h3>
                    <p class="text-slate-400 text-sm">Edit Task Lists. Request <strong>screenshots</strong> for verification.</p>
                </div>
            </div>
            <div class="text-center mt-12 text-slate-600 text-sm">
                Generated for the Antigravity Developer Guide
            </div>
        </footer>

    </main>

    <script>
        // --- CHART UTILITIES ---
        function wrapText(str) {
            if (str.length <= 16) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= 16) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        const tooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: { color: '#cbd5e1' }
                },
                tooltip: tooltipConfig
            }
        };

        // --- CHARTS ---
        // 1. Safety Chart
        const ctxSafety = document.getElementById('safetyChart').getContext('2d');
        new Chart(ctxSafety, {
            type: 'bar',
            data: {
                labels: [wrapText('Turbo (Unsafe)'), wrapText('Auto (Recommended)'), wrapText('Off (Manual)')],
                datasets: [{
                    label: 'Risk Level (0-100)',
                    data: [90, 20, 5],
                    backgroundColor: ['rgba(244, 114, 182, 0.8)', 'rgba(34, 211, 238, 0.8)', 'rgba(16, 185, 129, 0.8)'],
                    borderColor: ['#f472b6', '#22d3ee', '#10b981'],
                    borderWidth: 1
                }]
            },
            options: {
                ...commonOptions,
                indexAxis: 'y',
                scales: {
                    x: { beginAtZero: true, grid: { color: '#334155' }, ticks: { color: '#94a3b8' } },
                    y: { grid: { display: false }, ticks: { color: '#f8fafc' } }
                }
            }
        });

        // 2. Consistency Radar
        const ctxRadar = document.getElementById('consistencyRadar').getContext('2d');
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: [wrapText('Code Speed'), wrapText('Safety Check'), wrapText('Context Awareness'), wrapText('Plan Adherence'), wrapText('Debugging Ease')],
                datasets: [{
                    label: 'Fast Mode',
                    data: [95, 20, 30, 25, 40],
                    fill: true,
                    backgroundColor: 'rgba(244, 114, 182, 0.2)',
                    borderColor: '#f472b6',
                    pointBackgroundColor: '#f472b6'
                }, {
                    label: 'Planning Mode',
                    data: [50, 95, 90, 95, 85],
                    fill: true,
                    backgroundColor: 'rgba(34, 211, 238, 0.2)',
                    borderColor: '#22d3ee',
                    pointBackgroundColor: '#22d3ee'
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    r: {
                        angleLines: { color: '#475569' },
                        grid: { color: '#334155' },
                        pointLabels: { color: '#cbd5e1', font: { size: 12 } },
                        ticks: { display: false, backdropColor: 'transparent' }
                    }
                }
            }
        });

        // 3. Accuracy Donut
        const ctxDonut = document.getElementById('accuracyDonut').getContext('2d');
        new Chart(ctxDonut, {
            type: 'doughnut',
            data: {
                labels: [wrapText('Drafting Prompt'), wrapText('Reviewing Plans'), wrapText('Verifying Artifacts'), wrapText('Agent Coding')],
                datasets: [{
                    label: 'Ideal Time Allocation',
                    data: [20, 30, 30, 20],
                    backgroundColor: ['#a78bfa', '#22d3ee', '#f472b6', '#334155'],
                    borderWidth: 0,
                    hoverOffset: 10
                }]
            },
            options: {
                ...commonOptions,
                cutout: '60%',
                plugins: {
                    ...commonOptions.plugins,
                    legend: { position: 'right', labels: { color: '#cbd5e1', font: { size: 14 } } }
                }
            }
        });

        // --- GEMINI INTEGRATION ---
        
        // This is empty by default for GitHub Pages deployment.
        // The user must provide a key in the UI.
        const defaultApiKey = ""; 

        async function callGemini(prompt) {
            // Priority: UI Input > Hardcoded Variable
            const uiKey = document.getElementById('userApiKey').value.trim();
            const apiKey = uiKey || defaultApiKey;

            if (!apiKey) {
                alert("Please enter a valid Gemini API Key in the 'Interactive AI Tools' section above.");
                return null;
            }

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }]
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || 'API Error');
                }
                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error(error);
                return `Error: ${error.message}. Please check your API Key.`;
            }
        }

        async function analyzeRisk() {
            const input = document.getElementById('riskInput');
            const output = document.getElementById('riskOutput');
            const btn = document.getElementById('riskBtn');
            const task = input.value.trim();

            if (!task) return;

            output.classList.remove('hidden');
            output.innerHTML = '<span class="animate-pulse">Analyzing terminal permissions...</span>';
            btn.disabled = true;
            btn.classList.add('opacity-50');

            const prompt = `You are a security expert for the Google Antigravity IDE. 
            The user wants to perform this task: "${task}".
            Analyze the safety risk. 
            Recommend ONE of these Terminal Permissions: 'Off' (Manual Approval), 'Auto' (Ask for sensitive), or 'Turbo' (No approval).
            Explain why in 1-2 short sentences. Be strict about safety.`;

            const result = await callGemini(prompt);
            
            if (result) output.innerText = result;
            else output.classList.add('hidden'); // Hide if no result (key error alert shown)

            btn.disabled = false;
            btn.classList.remove('opacity-50');
        }

        async function generatePlan() {
            const input = document.getElementById('planInput');
            const output = document.getElementById('planOutput');
            const btn = document.getElementById('planBtn');
            const project = input.value.trim();

            if (!project) return;

            output.classList.remove('hidden');
            output.innerHTML = '<span class="animate-pulse">Generating Implementation Plan Artifact...</span>';
            btn.disabled = true;
            btn.classList.add('opacity-50');

            const prompt = `You are the Google Antigravity Agent operating in 'Planning Mode'. 
            The user wants to build: "${project}". 
            Generate a concise, numbered 5-step 'Task List Artifact' for this project. 
            Focus on architectural setup and safety checks. Do not write code, just the plan steps.`;

            const result = await callGemini(prompt);
            
            if (result) output.innerText = result;
            else output.classList.add('hidden');

            btn.disabled = false;
            btn.classList.remove('opacity-50');
        }
    </script>
</body>
</html>